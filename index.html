<!doctype html>
<html lang="en" style="background-color: #1c1b21">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Links</title>
    <link rel="icon" type="image/x-icon" href="./assets/links.png" />
  </head>

  <body>
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
      <div id="sidebar-content"></div>
    </div>

    <!-- Button to Toggle Sidebar -->

    <div class="header">
      <!-- My Logo -->
      <span>
        <img class="icon" src="./assets/links.png" alt="icon" />
      </span>
      <span style="flex-grow: 1; text-align: center">
        <h1 class="homepage-title">Links</h1>
      </span>
      <!-- <span style="flex-grow: 1"> -->
      <!--   <a href="blank">Link </a> -->
      <!-- </span> -->
      <span>
        <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
      </span>
    </div>

    <!-- Buttons -->
    <div class="section-selector">
      <button class="ai" onclick="switchSection('ai')">ğŸ¤– AI</button>
      <button class="news" onclick="switchSection('news')">ğŸ“° News</button>
      <button class="vet" onclick="switchSection('vet')">ğŸ¶ Veterinary</button>
      <button class="software" onclick="switchSection('software')">
        ğŸ–¥ï¸ Software
      </button>
      <button class="code" onclick="switchSection('code')">ğŸ› ï¸ Code</button>
      <button class="lifestyle" onclick="switchSection('lifestyle')">
        ğŸ¹ Lifestyle
      </button>
      <button class="databases" onclick="switchSection('db')">
        ğŸ—ƒï¸ Databases
      </button>
      <button class="cybersec" onclick="switchSection('cybersec')">
        ğŸ” Cybersec
      </button>
      <button class="book" onclick="switchSection('book')">ğŸ“š Books</button>
      <button class="yt" onclick="switchSection('yt')">â–¶ Youtube</button>
    </div>

    <!-- Columns -->
    <div id="content-container"></div>

    <!-- Sidebar Content (Hidden by Default) -->
    <div id="mainpage-content" class="sidebar-content">
      <h3>Coming Soon...</h3>
    </div>

    <div class="footer">
      <p>
        <a
          href="https://github.com/janpstrunn"
          class="glass-btn !px-3"
          target="_blank"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            fill="currentColor"
            viewBox="0 0 256 256"
          >
            <path
              d="M208,104v8a48,48,0,0,1-48,48H136a32,32,0,0,1,32,32v40H104V192a32,32,0,0,1,32-32H112a48,48,0,0,1-48-48v-8a49.28,49.28,0,0,1,8.51-27.3A51.92,51.92,0,0,1,76,32a52,52,0,0,1,43.83,24h32.34A52,52,0,0,1,196,32a51.92,51.92,0,0,1,3.49,44.7A49.28,49.28,0,0,1,208,104Z"
              opacity="0.2"
            ></path>
            <path
              d="M208.3,75.68A59.74,59.74,0,0,0,202.93,28,8,8,0,0,0,196,24a59.75,59.75,0,0,0-48,24H124A59.75,59.75,0,0,0,76,24a8,8,0,0,0-6.93,4,59.78,59.78,0,0,0-5.38,47.68A58.14,58.14,0,0,0,56,104v8a56.06,56.06,0,0,0,48.44,55.47A39.8,39.8,0,0,0,96,192v8H72a24,24,0,0,1-24-24A40,40,0,0,0,8,136a8,8,0,0,0,0,16,24,24,0,0,1,24,24,40,40,0,0,0,40,40H96v16a8,8,0,0,0,16,0V192a24,24,0,0,1,48,0v40a8,8,0,0,0,16,0V192a39.8,39.8,0,0,0-8.44-24.53A56.06,56.06,0,0,0,216,112v-8A58,58,0,0,0,208.3,75.68ZM200,112a40,40,0,0,1-40,40H112a40,40,0,0,1-40-40v-8a41.74,41.74,0,0,1,6.9-22.48A8,8,0,0,0,80,73.83a43.81,43.81,0,0,1,.79-33.58,43.88,43.88,0,0,1,32.32,20.06A8,8,0,0,0,119.82,64h32.35a8,8,0,0,0,6.74-3.69,43.87,43.87,0,0,1,32.32-20.06A43.81,43.81,0,0,1,192,73.83a8.09,8.09,0,0,0,1,7.65A41.76,41.76,0,0,1,200,104Z"
            ></path></svg
        ></a>
        <a
          href="https://mastodon.social/@janpstrunn"
          class="glass-btn !px-3"
          target="_blank"
        >
          <svg
            fill="currentColor"
            width="22"
            height="22"
            viewBox="0 0 192 192"
            xmlns="http://www.w3.org/2000/svg"
            xml:space="preserve"
            style="
              fill-rule: evenodd;
              clip-rule: evenodd;
              stroke-linejoin: round;
              stroke-miterlimit: 2;
            "
          >
            <path
              d="M2004.3 228h-.57c-19.87.163-38.97 2.491-50.13 7.601-.5.213-24.58 10.78-24.58 46.99 0 7.394-.14 16.236.09 25.612.4 16.438 2 32.742 7.21 45.957 5.67 14.406 15.47 25.335 32.04 29.72 14.11 3.737 26.23 4.503 35.99 3.967h.01c18.41-1.021 28.71-6.695 28.71-6.695a6.018 6.018 0 0 0 3.16-5.558l-.56-12.178a5.984 5.984 0 0 0-2.56-4.646 5.995 5.995 0 0 0-5.24-.804s-11.04 3.471-23.45 3.047c-4.87-.167-9.84-.357-14.18-1.544-3.91-1.069-7.14-3.148-8.76-7.347 5.59.951 13.45 2.021 22.27 2.425 10.49.481 20.33-.592 30.33-1.785 12.37-1.477 23.76-6.688 31.4-13.091 5.8-4.865 9.47-10.509 10.5-15.801v-.001c3.23-16.623 3.05-40.428 3.04-41.319-.01-36.286-24.23-46.801-24.58-46.951-11.14-5.105-30.25-7.436-50.14-7.599Zm59.9 93.58.09-.471c3.1-15.948 2.73-38.451 2.73-38.451v-.067c0-27.633-17.49-36.04-17.49-36.04a.234.234 0 0 0-.05-.024c-10.05-4.616-27.33-6.379-45.26-6.527h-.41c-17.93.148-35.2 1.911-45.25 6.527l-.06.024s-17.48 8.407-17.48 36.04c0 7.308-.15 16.047.09 25.314v.004c.36 14.96 1.64 29.826 6.37 41.852 4.27 10.836 11.49 19.221 23.95 22.519 12.65 3.349 23.51 4.066 32.26 3.585 9.61-.533 16.56-2.512 20.36-3.891l-.04-.739c-5.11 1.018-12.33 2.033-20 1.771-16.29-.559-32.69-3.029-35.34-23.016a40.2 40.2 0 0 1-.35-5.4 6 6 0 0 1 2.3-4.719 5.998 5.998 0 0 1 5.13-1.109s12.59 3.066 28.55 3.798c9.81.45 19.01-.598 28.36-1.713 9.88-1.18 19.01-5.258 25.11-10.372 3.36-2.814 5.83-5.834 6.43-8.895Zm-54.2-36.244c.68-2.603 3.99-12.807 14.27-12.807 10.68 0 10.54 12.137 10.54 12.137v34.224c0 3.311 2.69 6 6 6s6-2.689 6-6v-34.406s-.68-23.955-22.54-23.955c-10 0-16.43 5.292-20.4 10.778-4.07-5.273-10.62-10.293-20.78-10.293-6.92 0-11.53 2.138-14.68 4.857-6.67 5.747-6.86 14.826-6.81 16.949l.02.455s-.01-.161-.02-.455v-.052 36.342c0 3.311 2.69 6 6 6s6-2.689 6-6v-36.342c0-.169-.01-.338-.02-.507 0 0-.5-4.577 2.66-7.298 1.45-1.252 3.66-1.949 6.85-1.949 10.65 0 14.18 9.844 14.91 12.386v20.233c0 3.311 2.69 6 6 6s6-2.689 6-6v-20.297Z"
              style="
                fill-rule: evenodd;
                clip-rule: evenodd;
                stroke-linejoin: round;
                stroke-miterlimit: 2;
              "
              transform="translate(-1908 -212)"
            />
          </svg>
        </a>
      </p>
      <span style="padding-right: 15px">
        <a href="https://github.io/janpstrunn/links">Source Code</a>
      </span>
    </div>

    <script>
      // Fetch local data/links.json
      fetch("data/links.json")
        .then((response) => response.json())
        .then((links) => {
          let container = document.getElementById("content-container");
          let groupedLinks = {};

          links.forEach((link) => {
            if (!groupedLinks[link.id]) groupedLinks[link.id] = {};
            if (!groupedLinks[link.id][link.sub_id])
              groupedLinks[link.id][link.sub_id] = [];
            groupedLinks[link.id][link.sub_id].push(link);
          });

          // Construct the columns
          Object.keys(groupedLinks).forEach((id) => {
            let sectionDiv = document.createElement("div");
            sectionDiv.className = "section hidden";
            sectionDiv.id = id;

            let sectionTitle = document.createElement("h2");
            sectionTitle.textContent = `${id.toUpperCase()}`;
            sectionTitle.className = `${id}`;
            sectionDiv.appendChild(sectionTitle);

            let columnsContainer = document.createElement("div");
            columnsContainer.className = "columns-container"; // Wraps all columns

            Object.keys(groupedLinks[id]).forEach((sub_id) => {
              let columnDiv = document.createElement("div");
              columnDiv.className = "column";

              let subIdTitle = document.createElement("h3");
              subIdTitle.className = `sub_id_title ${id}`;
              subIdTitle.textContent = `${sub_id}`;
              columnDiv.appendChild(subIdTitle);

              groupedLinks[id][sub_id].forEach((link) => {
                let a = document.createElement("a");
                a.href = link.url;
                a.className = "card";
                a.innerHTML = `<img src="${link.icon}" width="32"><p>${link.title}</p>`;
                columnDiv.appendChild(a);
              });

              columnsContainer.appendChild(columnDiv);
            });

            sectionDiv.appendChild(columnsContainer);
            container.appendChild(sectionDiv);
          });

          const allSections = document.querySelectorAll(".section");

          // Section Switching and Hashing

          window.switchSection = function (sectionId) {
            const targetSection = document.getElementById(sectionId);

            // Hide all sections
            allSections.forEach((section) => section.classList.add("hidden"));

            if (targetSection) {
              targetSection.classList.remove("hidden");
            }

            // Remove "active" class from all buttons
            document
              .querySelectorAll(".section-selector button")
              .forEach((button) => button.classList.remove("active"));

            // Add "active" class to the clicked button
            document
              .querySelector(`button[onclick="switchSection('${sectionId}')"]`)
              .classList.add("active");
          };

          // Switch to the first section at start

          if (Object.keys(groupedLinks).length > 0) {
            const firstSection = Object.keys(groupedLinks)[0];
            switchSection(firstSection);
          }

          // Toggle Sidebar

          function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            const sidebarContent = document.getElementById("sidebar-content");
            const contentSource = document.getElementById("mainpage-content");

            if (sidebar.classList.contains("active")) {
              sidebar.classList.remove("active"); // Close sidebar
            } else {
              sidebarContent.innerHTML = contentSource.innerHTML; // Load content
              sidebar.classList.add("active"); // Open sidebar

              // Close sidebar when clicking outside
              document.addEventListener("click", function closeSidebar(event) {
                if (
                  !sidebar.contains(event.target) &&
                  event.target.className !== "emoji-button"
                ) {
                  sidebar.classList.remove("active");
                  document.removeEventListener("click", closeSidebar);
                }
              });
            }
          }
        });

      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const sidebarContent = document.getElementById("sidebar-content");
        const contentSource = document.getElementById("mainpage-content");

        if (sidebar.classList.contains("actived")) {
          sidebar.classList.remove("actived"); // Close sidebar
        } else {
          sidebarContent.innerHTML = contentSource.innerHTML; // Load content
          sidebar.classList.add("actived"); // Open sidebar

          // Close sidebar when clicking outside
          document.addEventListener("click", function closeSidebar(event) {
            if (
              !sidebar.contains(event.target) &&
              event.target.className !== "toggle-btn"
            ) {
              sidebar.classList.remove("actived");
              document.removeEventListener("click", closeSidebar);
            }
          });
        }
      }
    </script>
  </body>
</html>
